<launch>

    <param name="robot_description" textfile="$(find teleop_urdf)/urdf/teleop_fixed_base.urdf"/>
    <param name="robot_description_semantic" textfile="$(find teleop_srdf)/srdf/teleop_fixed_base.srdf"/>   
    <param name="collision_urdf" textfile="$(find teleop_urdf)/urdf/teleop_capsules.rviz"/>
    <param name="cartesian/problem_description" textfile="$(find teb_test)/config/problem/teleop_stack.yaml"/>
    <param name="use_sim_time" value="false"/>

    <arg name="vision" default="true"/>
    <arg name="is_model_floating_base" value="false"/>

    <!-- zedm ros wrapper -->
    <group if="$(arg vision)">
        <include file="$(find zed_wrapper)/launch/zedm.launch">
            <arg name="cam_pos_x" value="2.0"/>
            <arg name="cam_pos_y" value="0.0"/>
            <arg name="cam_pos_z" value="0.0"/>
            <arg name="cam_pitch" value="0.0"/>
            <arg name="base_frame" value="world"/>
        </include>

        <!-- vision node -->
        <node pkg="teb_test" type="vision_node" name="vision_node" output="screen" args="/zedm/zed_node/point_cloud/cloud_registered"/>
    </group>

    <!-- optimizer node -->
    <node pkg="teb_test" type="optimizer" name="optimizer" output="screen">
        <param name="optimizer_config" textfile="$(find teb_test)/config/problem/constraint.yaml"/>
        <param name="is_model_floating_base" value="$(arg is_model_floating_base)"/>
    </node>

    <!-- robot control node -->
    <node pkg="teb_test" type="robot_controller_node" name="robot_controller_node" output="screen">
        <param name="is_model_floating_base" value="$(arg is_model_floating_base)"/>
    </node>

    <!-- rviz -->
    <node pkg="rviz" type="rviz" name="rviz" args="-d $(find teb_test)/config/rviz/simple_trj_optimizer.rviz" output="screen"/>

</launch>
